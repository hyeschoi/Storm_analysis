{
    "contents" : "---\ntitle: \"Homework7 Report\"\nauthor: \"Hye Soo Choi\"\ndate: \"August 2, 2015\"\nheader-includes: \\usepackage{graphicx}\n                 \\usepackage{float}\noutput: \n    pdf_document:\n        fig_caption: true\n---\n-----\n\n## Data source\n\nIn this study, we analyzed the data about storms that hit the world in 2010, in terms of location, speed, pressure, date of occurence, and duration. We used the storm data of 2010 [(Year.2010.ibtracs_wmo.v03r06.cxml)](Year.2010.ibtracs_wmo.v03r06.cxml), which can be obtained at the __International Best Track Archive for Climate Stewardship (IBTrACS)__  [(ftp://eclipse.ncdc.noaa.gov/pub/ibtracs/v03r06/wmo/cxml/year)](ftp://eclipse.ncdc.noaa.gov/pub/ibtracs/v03r06/wmo/cxml/year). \n\n-----\n\n## Data cleaning\n\nA cleaned data.frame, *storms*, was created by mainly using *XPATH* expressions from **XML** package, to extract various pieces of data. After extracting the variables of interest and changing the variable formats, the final data include the following variables:\n\n - name: name of the storm (e.g. ANJA) \n - date: date (e.g. 2009-11-13) \n - time: time (e.g. 06:00:00) \n - latitude: latitude (e.g. -9.50) \n - lat_deg: latitude degrees (e.g. “N”) \n - longitude: longitude (e.g. 72.50) \n - lon_deg\": longitude degrees (e.g. “E”) \n - press: pressure (e.g. 1006.0)\n - wind: wind speed (e.g. 0.0) \n\n\n\n```{r echo = FALSE, message= FALSE}\n# necessary packages\nlibrary(xtable)\nlibrary(readr)\nlibrary(sp)\nlibrary(gpclib)\nlibrary(ggplot2)\nlibrary(ggmap)\nlibrary(maptools)\nlibrary(maps)\n```\n\n\n```{r ,echo = FALSE}\nstorms <- read_csv('./ibtracs_2010.csv', col_names = TRUE)\n```\n\nThe following displays the first 6 observations in the data.\n\n```{r head, eval = TRUE}\nhead(storms, 6)\n```\n\n-----\n\n## Data analysis\n\n```{r, echo = FALSE}\n\n\n# summary statistics for pressure\nsum_pressure <- c(min(na.omit(storms$press))\n, max(na.omit(storms$press))\n, sd(na.omit(storms$press))\n, mean(na.omit(storms$press))\n, quantile(na.omit(storms$press)))\n\n# summary statistics for wind speed\nsum_wind <- c(min(na.omit(storms$wind))\n, max(na.omit(storms$wind))\n, sd(na.omit(storms$wind))\n, mean(na.omit(storms$wind))\n, quantile(na.omit(storms$wind)))\n\n# duration: a vector that shows how many days each storm last for.\n\nduration <- sapply(unique(storms$name), function(x) {max(storms$date[storms$name == x]) - min(storms$date[storms$name == x])})\n\n# summary statistics for duration\nsum_duration <- c(min(duration)\n, max(duration)\n, sd(duration)\n, mean(duration)\n, quantile(duration))\n\n\n# combine summary statistics for pressure, wind speed, duration into a data frame\nsummary <- rbind(sum_pressure, sum_wind, sum_duration)\ncolnames(summary)[1:4] <- c('min','max','sd','mean')\nsummary <- summary[,c('mean','sd','min','max','25%','50%','75%')]\nrownames(summary) <- c('pressure','speed','duration')\n```\n\n\n\nAn exploratory analysis was performed with respect to the pressure, wind speed, and duration of storms.\nWe first examine the descriptive statistics of the variables. \nThe following table presents the summary statistics of the three variables. \n\n\n```{r  results='asis', echo=FALSE, message= FALSE}\nxtb <- xtable(summary, format= 'latex', caption = 'summary statistics of pressure, speed, duration', digits = c(0,2,2,0,0,0,0,0))\nprint(xtb, comment = FALSE, table.placement= 'H', type= 'latex')\n\n```\n\n\nTo understand the distribution, we also produced histogram and boxplot for each variable. \n\n\n```{r fig.width = 7, fig.height= 5.2, echo = FALSE, fig.show = 'asis', fig.cap ='Histogram and Box plot of pressure, wind speed, duration'}\n\nop <- par(mfrow = c(3,2))\n\nhist(storms$press, xlab = 'Pressure (hPa)' , main = 'Histogram')\nboxplot(na.omit(storms$press), main = 'Box plot', xlab='Pressure (hPa)', horizontal = TRUE)\n\n\nhist(storms$wind, xlab = 'Wind speed (kt)' ,  main = '')\nboxplot(storms$wind,  main = '', xlab='Wind speed (kt)', horizontal = TRUE)\n\n\nhist(duration, xlab = 'Duration (day)',  main = '')\nboxplot(duration, horizontal = TRUE, xlab = 'Duration (day)', main = '')\n\npar(op)\n```\n\n\n\nWe can observe that the pressure is skewed to left, and the wind speed and duration are skewed to left. \n\n------\n\nIn addition, we also found several informative factors of the storms: \n\n\n```{r echo =FALSE}\nstorm_2010 <- unique(storms$name[format(storms$date, '%Y') == '2010'])\n```\n- Total number of storms in 2010: `r length(storm_2010)`\n\n```{r echo = FALSE}\n\ntropical <- unique(na.omit(storms$name[storms$wind >= 35]))\n```\n\n- Number of storms with winds >= 35 knots (tropical storms): `r length(tropical)`\n\n```{r echo = FALSE}\nhurricane <- unique(na.omit(storms$name[storms$wind >= 64]))\n```\n\n- Number of storms with winds >= 64 knots (hurricanes): `r length(hurricane)`\n\n\n```{r echo = FALSE} \nmajor_hurricane <- unique(na.omit(storms$name[storms$wind >= 96]))\n```\n- Number of storms with winds >= 96 knots (major hurricanes) : `r length(major_hurricane)`\n\n``` {r echo = FALSE}\n# north : vector of storms on the north hemisphere\n# south : vector of storms on the south hemisphere\n\nnorth <- unique(na.omit(storms$name[storms$latitude >= 0]))\nsouth <- unique(na.omit(storms$name[storms$latitude < 0]))\n```\n\n- Number of storms on the north hemisphere: `r length(north)`\n- Number of storms on the south hemisphere: `r length(south)`\n\n\n```{r echo = FALSE}\n\n# Frequency table with data points per month (month in words) in northern hemisphere\n# Frequency table with data points per month (month in words) in southern hemisphere\n\nmonth <- months(storms$date, abbreviate = TRUE)\nfreq_month <- table(month)\nfreq_month <- freq_month[month.abb]\n\nmonth_north <- months(na.omit(storms$date[storms$latitude >= 0]), abbreviate = TRUE)\n\nfreq_north <- rep(0, 12)\nnames(freq_north) <- month.abb\ntable_north <- table(month_north)\nfreq_north[names(table_north)] <-table_north \n\nfreq_south <- freq_month - freq_north\nfreq <- as.data.frame(rbind(freq_month, freq_north, freq_south))\nrownames(freq) <- c('World','Northern', 'Southern') \n```\n\n- Frequency table of data points per month (month in words) in the world, northern hemisphere, and southern hemisphere:\n\n\n```{r echo = FALSE, results='asis'}\n\nxtb1 <- xtable(freq, format= 'latex', caption = 'Frequency table of data points per month in the world, and nothern and southern hemisphere', digits = 0)\nprint(xtb1, comment = FALSE)\n\n```\n\n- Name of storm that lasted most days : `r names(duration)[duration == max(duration)]`\n\n- Name of storm with maximum wind speed and the maximum speed value: `r unique(na.omit(storms$name[storms$wind == max(storms$wind, na.rm = TRUE)]))` and `r max(storms$wind, na.rm = TRUE)`\n\n- Name of storm with minimum pressure and the maximum pressure value: `r unique(na.omit(storms$name[storms$press == min(storms$press, na.rm = TRUE)]))` and `r min(storms$press, na.rm = TRUE)`\n\n-----\n\n## Data visualization\n\nFor the visualization of the data, we produced a world map with spatial distribution of storm activity in 2010. The color of data points reflects the intensity of each storm activity; the  higher wind speed was, the darker blue a point is colored on the map.\n\n\n```{r echo=FALSE, fig.width=7, fig.height= 3.2 , fig.cap = 'Spatial distribution of storm activity in 2010'}\nmp1 <- NULL\nmapWorld <- borders(\"world\", colour=\"#dd855c40\", fill=\"#67b988\") # create a layer of borders\nmp1 <- ggplot(storms, aes(x=longitude, y=latitude, col = wind) ) + mapWorld\nmp1 <- mp1+ geom_point(pch= 20, size=3, alpha = 1/2) \nmp1 <- mp1 + ggtitle('IBTrACS Storms 2010')\nmp1 <- mp1 + xlab('Longitude') + ylab('Latitude')\nmp1 <- mp1 + theme(panel.background = element_rect(fill = \"#aae6f6\"),\n                 panel.grid.major = element_blank(),\n                 panel.grid.minor = element_blank())\nmp1 <- mp1 + geom_hline(yintercept = 0 , col='#285658a0', linetype = 2)\n \nmp1\n```\n\n",
    "created" : 1439581765262.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "376413004",
    "id" : "85ABADB4",
    "lastKnownWriteTime" : 1438656356,
    "path" : "~/Downloads/homework07/Report.Rmd",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 6,
    "source_on_save" : false,
    "type" : "r_markdown"
}