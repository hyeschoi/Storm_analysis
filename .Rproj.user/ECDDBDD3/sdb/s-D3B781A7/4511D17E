{
    "contents" : "##----------------------------------------------------------------------------------------------\n# Header\n##----------------------------------------------------------------------------------------------\n# In this rscript file,\n# we will clean raw data saved in 'raw_data' file, \n# and save two clead data frame 'storms' and 'tracks'\n# as csv files in 'data' file\n\n# For further details\n#\n# storms.csv will contain the following columns\n#     id: Storm number since year 1851\n#     date: MM/DD/Year  (as Date)\n#     days: Number of days in which positions are available\n#     name: Name of the storm\n\n\n# tracks.csv will contain the following columns\n#     id: Storm number since year 1851\n#     date: MM/DD/Year  (as Date)\n#     period: 00h, 06h, 12h, 18h\n#     stage: type of stage\n#     lat: latitude\n#     long: longitude (negative degrees for west)\n#     wind: wind speed\n#     press: surface pressure\n##----------------------------------------------------------------------------------------------\n\n\n\n##----------------------------------------------------------------------------------------------\n# required packages\n##----------------------------------------------------------------------------------------------\nlibrary(readr)\n\n\n\n\n##----------------------------------------------------------------------------------------------\n# Import data\n##----------------------------------------------------------------------------------------------\n# import rawdata saved at 'rawdata' folder\n# and save it as string vectors 'storm_data'\n##----------------------------------------------------------------------------------------------\n \nstorm_data <- read_lines('./rawdata/Basin.NA.ibtracs_hurdat.v03r06.hdat')\n \n \n\n \n \n \n \n ##----------------------------------------------------------------------------------------------\n# Data cleaning\n##----------------------------------------------------------------------------------------------\n# From uncleaned storm_data\n# we will first devide the storm_data into two parts\n# , one containg HEADER and the other containing DAILY DATA.\n \n \n# Then, we will extract \n#     id: Storm number since year 1851\n#     date: MM/DD/Year  (as Date)\n#     days: Number of days in which positions are available\n#     name: Name of the storm\n# from HEADER to form a data frame named 'storms'\n \n \n# Then, we will extract \n#     id: Storm number since year 1851\n#     date: MM/DD/Year  (as Date)\n#     period: 00h, 06h, 12h, 18h\n#     stage: type of stage\n#     lat: latitude\n#     long: longitude (negative degrees for west)\n#     wind: wind speed\n#     press: surface pressure \n# from DAILY DATA to form a data frame named 'tracks'\n#---------------------------------------------------------------------------------------------- \n \n \n# extract only HEADER using grep function\n# Note: HEADER lines always contains string 'SNBR', but DAILY DATA and TRAILER does not.\n\nheader <- grep(storm_data, pattern = 'SNBR', value = TRUE)\n\n\n \n \n \n# Because HEADER lines are containing numbers and strings\n# that are distinguised by either ' ' or '=',\n# we will split extracted header lines by either '=' or 'blank'\n \nstr_headers <- strsplit(header,split =  '= *| +', fixed = FALSE)\n \n \n \n \n \n# Define function to extract information in our interest\n# name : extract\n# input : positive integer index i \n# function: extract i-th element from each string vector corresponging to each HEADER lines \n# return: a vector consisting of the i-th strings\n\nextract<-function(i){\n  sapply(str_headers,function(x){x[i]})\n}\n\n\n \n \n# using function 'extract'\n# extract data,name, days of each storms from header \n# Note: 2nd element in each string vector is date,\n#     : 4th element in each string vector is days(duration),\n#     : 8th element in each string vector is name.\n \ndate <- as.Date(extract(2), format ='%m/%d/%Y') # save as Date\ndate <- format(date, format = '%m/%d/%Y') # reformatting date\ndays <- as.numeric(extract(4)) \nname <- extract(8)\n\n\n\n\n# create a data frame named 'storms'\n# containing id,date,duration(days), and name of storms\n# one storm per row\n \nn <- length(date) # number of storms\nstorms <- data.frame(id= 1:n, date= date, days = days , name= name)\n \n \n\n##----------------------------------------------------------------------------------------------\n# Save \n##----------------------------------------------------------------------------------------------\n# save the cleaned data frame as a csv file\n# file will be saves in 'data' files with name 'storms.scv'\n ##----------------------------------------------------------------------------------------------\n \nwrite_csv(storms, './data/storms.csv')\n\n \n \n \n \n ",
    "created" : 1438884636509.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1339620655",
    "id" : "4511D17E",
    "lastKnownWriteTime" : 1438891389,
    "path" : "~/Desktop/Summer2015/Final_project/code/Data_cleaning.R",
    "project_path" : "code/Data_cleaning.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "type" : "r_source"
}